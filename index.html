<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Vivo Campus Party</title>
	<meta name="description" content="Vivo Campus Party">
	<meta name="author" content="Wunderman">
	<link rel="stylesheet" href="css/reset.css" media="all" type="text/css">
	<link rel="stylesheet" href="css/layout.css" media="all" type="text/css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
	
	<script src="phonegap.js"></script>
	
		<script type="text/javascript">
			init ();
			
			function log (text){
				console.log (text);
			}
			
			function init ()
			{
				clearDefaults( );
				
				alert ("w3: " + window.innerWidth + "h3:" + window.innerHeight);
				//alert ("w: " + window.innerWidth + "h:" + window.innerHeight);
			}
			
			function clearDefaults ()
			{
			/*D.onmousemove = viewportcancel;
				D.onmouseup = viewportcancel;
				D.onmousedown = viewportcancel;
				D.oncontextmenu = viewportcancel;*/
			}
			
			request = {
				url: 'http://192.168.0.101/',
				delay: 25,
				lastcode: null,
				requestTimer: null,
			
				send: function(code){
					if(code == this.lastcode){
						return;
					}
					
					clearTimeout(this.requestTimer);
					
					var clear = this.lastcode == null;
					
					this.lastcode = code;
					
					if(code == null){
						this.httpRequest('c');
					}else if(clear){
						this.httpRequest(code);
					}else{
						var scope = this;
						this.requestTimer = setTimeout(function(){
							scope.httpRequest(code);
						}, this.delay);
					}
				},
			
				lastHttpReq: null,
			
				httpRequest: function(strURL) {
					
					if(this.lastHttpReq){
						this.lastHttpReq.xmlHttpReq.abort();
						this.lastHttpReq.xmlHttpReq=null; 
					}
				
					var thisHttpReq = {};
					
					if (window.XMLHttpRequest) {
						thisHttpReq.xmlHttpReq = new XMLHttpRequest();
					}
					else if (window.ActiveXObject) {
						thisHttpReq.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
					}
					
					thisHttpReq.xmlHttpReq.open('GET', this.url + strURL, true);
					thisHttpReq.xmlHttpReq.onreadystatechange = function() {
						if (thisHttpReq.xmlHttpReq.readyState == 1) {
							if (thisHttpReq.xmlHttpReq) { 
								thisHttpReq.xmlHttpReq.abort(); 
								thisHttpReq.xmlHttpReq=null; 
							}
						}
					}
					
					thisHttpReq.xmlHttpReq.send();
					
					this.lastHttpReq = thisHttpReq;
				}
			};
			
		</script>
		<script type="text/javascript" src="joystick.js"></script>
</head>
<body>
</body>
</html>